pico-8 cartridge // http://www.pico-8.com
version 16
__lua__

-- consts
screen_size = 128
debug       = true

-- camera stuff
cam_x = 0.0
cam_y = 0.0

-- player loc
ply_x = 0.0
ply_y = 0.0

-- ranges between 0 -> 1
-- -1.0 = full left
-- 0.0 = equilibrium
-- 1.0 = full right
tilt      = 0.0
tilt_eq   = 0.0
tilt_min  = -1.0
tilt_max  = 1.0
tilt_tick = 0.001

function update_tilt()
  -- get squared distance for change,
  -- i.e. tilt more when ur further out
  tilt_d = (abs(tilt_eq - tilt) ^ 2) / 20

  if tilt > tilt_eq then
    -- tilt right more if we are already tilting
    tilt   = min(tilt + tilt_d, tilt_max)
  elseif tilt < tilt_eq then
    -- tilt left more if we are already tilting
    tilt   = max(tilt - tilt_d, tilt_min)
  else
    -- don't change our tilt if we're in equilibrium
  end
end

-- gets perct. point of interpolate between x, y
function interpolate(x, y, perct)
  return (x - y) * perct
end

function _init()
end

function _update()
  update_tilt()
  if (btn(0)) tilt -= 0.05
  if (btn(1)) tilt += 0.05
end

function _draw()
  cls()
  
  camera(cam_x, cam_y)
  --circfill(x, y, 7, 14)

  map(0, 0, 0, 0, 100, 100)

  -- tiltometer gui
  gui_tilt_x = screen_size/2
  gui_tilt_y = 110
  gui_tilt_size = 7
  --circ(gui_tilt_x, gui_tilt_y - 15, 16)
  local p2_x = interpolate(0, gui_tilt_size, tilt)
  line(gui_tilt_x, gui_tilt_y, gui_tilt_x - p2_x, gui_tilt_y - gui_tilt_size * 2, 8)
  circ(gui_tilt_x, gui_tilt_y - gui_tilt_size, gui_tilt_size + 3, 7)
  print('tiltometer', gui_tilt_x - 18, gui_tilt_y + 5, 7)

  camera()

  -- debug prints
  if debug then
    print('tilt: '..tilt, 0, 0, 7)
  end
end

__gfx__
00000000000880000000880000000880000000880088000008800000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000880000000880000000880000000880088000008800000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000880000000880000000880000000880088000008800000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000880000000880000000880000000880088000008800000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000880000000880000008800000000880088000000880000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000880000000880000008800000008800088000000880000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000880000000880000008800000008800088000000880000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000880000000880000008800000008800088000000880000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000880000008800000008800000008800008800000880000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000880000008800000008800000008800008800000880000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000880000008800000008800000008800008800000880000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000880000008800000008800000008800008800000880000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000880000008800000088000000880000008800000088000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000880000008800000088000000880000008800000088000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000880000008800000088000000880000008800000088000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000880000008800000088000000880000008800000088000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bbbbbbbb000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bbbbbbbb000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bbbbbbbb000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bbbbbbbb000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bbbbbbbb000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bbbbbbbb000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bbbbbbbb000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bbbbbbbb000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
